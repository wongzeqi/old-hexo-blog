<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="baidu-site-verification" content="s8Pe1TBqyy" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>

<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="canvas," />





  <link rel="alternate" href="/atom.xml" title="王泽奇，个人博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="canvas画布一、canvas简介​ &amp;lt;canvas&amp;gt; 是 HTML5 新增的，一个可以使用脚本(通常为JavaScript)在其中绘制图像的 HTML 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。 ​ 它最初由苹果内部使用自己MacOS X WebKit推出，供应用程序使用像仪表盘的构件和 Safari 浏览器使用。 后来，有人通">
<meta name="keywords" content="canvas">
<meta property="og:type" content="article">
<meta property="og:title" content="canvas画布">
<meta property="og:url" content="http://wangzeqi.website/2017/07/02/canvas画布/index.html">
<meta property="og:site_name" content="王泽奇，个人博客">
<meta property="og:description" content="canvas画布一、canvas简介​ &amp;lt;canvas&amp;gt; 是 HTML5 新增的，一个可以使用脚本(通常为JavaScript)在其中绘制图像的 HTML 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。 ​ 它最初由苹果内部使用自己MacOS X WebKit推出，供应用程序使用像仪表盘的构件和 Safari 浏览器使用。 后来，有人通">
<meta property="og:image" content="https://mdn.mozillademos.org/files/224/Canvas_default_grid.png">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/57498980.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/92358331.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/20099429.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/83072674.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/97210404.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/62078705.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/95442248.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/40655077.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/94917354.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/35792129.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/69159470.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/55999388.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/31012258.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/18941618.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/90462466.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/39824191.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/29873575.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/41486892.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-5/5058353.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-5/92471191.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-6/87968030.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-6/84133001.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-9/14522939.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-9/86448348.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/83770925.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/36692804.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/37980271.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/40328613.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/89391901.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/15535750.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/15850624.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/37411043.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/41781103.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/29772191.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/23645788.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/78166139.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/27996302.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/73933570.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/65148759.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/88895274.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/21148678.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/44617053.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/11205920.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/53022912.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/65211642.jpg">
<meta property="og:image" content="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/61345876.jpg">
<meta property="og:updated_time" content="2017-07-02T08:28:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="canvas画布">
<meta name="twitter:description" content="canvas画布一、canvas简介​ &amp;lt;canvas&amp;gt; 是 HTML5 新增的，一个可以使用脚本(通常为JavaScript)在其中绘制图像的 HTML 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。 ​ 它最初由苹果内部使用自己MacOS X WebKit推出，供应用程序使用像仪表盘的构件和 Safari 浏览器使用。 后来，有人通">
<meta name="twitter:image" content="https://mdn.mozillademos.org/files/224/Canvas_default_grid.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '20152154',
      author: 'Wongzeqi'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wangzeqi.website/2017/07/02/canvas画布/"/>





  <title>canvas画布 | 王泽奇，个人博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <a href="https://github.com/wongzeqi"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王泽奇，个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">脚踏实地，奋斗不息</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-photos">
          <a href="/photos/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-image"></i> <br />
            
            相册
          </a>
        </li>
      

      
    </ul>
  

  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://wangzeqi.website/2017/07/02/canvas画布/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王泽奇">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/head.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王泽奇，个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">canvas画布</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-02T00:00:00+08:00">
                2017-07-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习积累/" itemprop="url" rel="index">
                    <span itemprop="name">学习积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
				<!--noindex-->
				<span class="post-comments-count">
				<span class="post-meta-divider">|</span>
				<span class="post-meta-item-icon">
				  <i class="fa fa-comment-o"></i>
				</span>
				
					<a href="/2017/07/02/canvas画布/#SOHUCS" itemprop="discussionUrl">
					  <span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="2017/07/02/canvas画布/" itemprop="commentsCount"></span>
					</a>
				
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  7,116
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  31
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="canvas画布"><a href="#canvas画布" class="headerlink" title="canvas画布"></a><center><a href="http://wangzeqi.website"><strong>canvas画布</strong></a></center></h1><h1 id="一、canvas简介"><a href="#一、canvas简介" class="headerlink" title="一、canvas简介"></a>一、canvas简介</h1><p>​ <code>&lt;canvas&gt;</code> 是 <code>HTML5</code> 新增的，一个可以使用脚本(通常为<code>JavaScript</code>)在其中绘制图像的 <code>HTML</code> 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。</p>
<p>​ 它最初由苹果内部使用自己<code>MacOS X WebKit</code>推出，供应用程序使用像仪表盘的构件和 <code>Safari</code> 浏览器使用。 后来，有人通过<code>Gecko</code>内核的浏览器 (尤其是<code>Mozilla</code>和<code>Firefox</code>)，<code>Opera</code>和<code>Chrome</code>和超文本网络应用技术工作组建议为下一代的网络技术使用该元素。</p>
<p>​ <code>Canvas</code>是由<code>HTML</code>代码配合高度和宽度属性而定义出的可绘制区域。<code>JavaScript</code>代码可以访问该区域，类似于其他通用的二维<code>API</code>，通过一套完整的绘图函数来动态生成图形。</p>
<p>​ Mozilla 程序从 Gecko 1.8 (Firefox 1.5)开始支持 <code>&lt;canvas&gt;</code>, Internet Explorer 从IE9开始<code>&lt;canvas&gt;</code> 。Chrome和Opera 9+ 也支持 <code>&lt;canvas&gt;</code>。<br><a id="more"></a></p>
<h1 id="二、Canvas基本使用"><a href="#二、Canvas基本使用" class="headerlink" title="二、Canvas基本使用"></a>二、Canvas基本使用</h1><h2 id="2-1-lt-canvas-gt-元素"><a href="#2-1-lt-canvas-gt-元素" class="headerlink" title="2.1 &lt;canvas&gt;元素"></a>2.1 <code>&lt;canvas&gt;</code>元素</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"tutorial"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div></pre></td></tr></table></figure>
<p>​ <code>&lt;canvas&gt;</code>看起来和<code>&lt;img&gt;</code>标签一样，只是 <code>&lt;canvas&gt;</code> 只有两个可选的属性 <code>width、heigth</code> 属性，而没有 <code>src、alt</code> 属性。</p>
<p>​ 如果不给<code>&lt;canvas&gt;</code>设置<code>widht、height</code>属性时，则默认 <code>width</code>为300、<code>height</code>为150,单位都是<code>px</code>。也可以使用<code>css</code>属性来设置宽高，但是如宽高属性和初始比例不一致，他会出现扭曲。所以，建议永远不要使用<code>css</code>属性来设置<code>&lt;canvas&gt;</code>的宽高。</p>
<h3 id="替换内容"><a href="#替换内容" class="headerlink" title="替换内容"></a>替换内容</h3><p>​ 由于某些较老的浏览器（尤其是IE9之前的IE浏览器）或者浏览器不支持HTML元素<code>&lt;canvas&gt;</code>，在这些浏览器上你应该总是能展示替代内容。</p>
<p>​ 支持<code>&lt;canvas&gt;</code>的浏览器会只渲染<code>&lt;canvas&gt;</code>标签，而忽略其中的替代内容。不支持 <code>&lt;canvas&gt;</code> 的浏览器则 会直接渲染替代内容。</p>
<blockquote>
<p>用文本替换：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;canvas&gt;</div><div class="line">    你的浏览器不支持canvas,请升级你的浏览器</div><div class="line">&lt;/canvas&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>用 <code>&lt;img&gt;</code> 替换：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;canvas&gt;</div><div class="line">    &lt;img src=&quot;./美女.jpg&quot; alt=&quot;&quot;&gt; </div><div class="line">&lt;/canvas&gt;</div></pre></td></tr></table></figure>
<h3 id="结束标签-lt-canvas-gt-不可省"><a href="#结束标签-lt-canvas-gt-不可省" class="headerlink" title="结束标签&lt;/canvas&gt;不可省"></a>结束标签<code>&lt;/canvas&gt;</code>不可省</h3><p>与 <code>&lt;img&gt;</code>元素不同，<code>&lt;canvas&gt;</code>元素<strong>需要</strong>结束标签(<code>&lt;/canvas&gt;</code>)。如果结束标签不存在，则文档的其余部分会被认为是替代内容，将不会显示出来。</p>
<h2 id="2-2-渲染上下文-Thre-Rending-Context"><a href="#2-2-渲染上下文-Thre-Rending-Context" class="headerlink" title="2.2 渲染上下文(Thre Rending Context)"></a>2.2 渲染上下文(Thre Rending Context)</h2><p>​ <code>&lt;canvas&gt;</code>会创建一个固定大小的画布，会公开一个或多个 <strong>渲染上下文</strong>(画笔)，使用 <strong>渲染上下文</strong>来绘制和处理要展示的内容。</p>
<p>​ 我们重点研究 2D渲染上下文。 其他的上下文我们暂不研究，比如， WebGL使用了基于OpenGL ES的3D上下文 (“experimental-webgl”) 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line"><span class="comment">//获得 2d 上下文对象</span></div><div class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div></pre></td></tr></table></figure>
<h2 id="2-3-检测支持性"><a href="#2-3-检测支持性" class="headerlink" title="2.3 检测支持性"></a>2.3 检测支持性</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (canvas.getContext)&#123;</div><div class="line">  <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">  <span class="comment">// drawing code here</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="comment">// canvas-unsupported code here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-4-代码模板"><a href="#2-4-代码模板" class="headerlink" title="2.4 代码模板"></a>2.4 代码模板</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Canvas tutorial<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"> canvas &#123; border: 1px solid black; &#125; </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"tutorial"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123; <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>); <span class="keyword">if</span>(!canvas.getContext) <span class="keyword">return</span>; <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>); <span class="comment">//开始代码 &#125; draw(); </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="2-5-一个简单的例子"><a href="#2-5-一个简单的例子" class="headerlink" title="2.5 一个简单的例子"></a>2.5 一个简单的例子</h2><blockquote>
<p>绘制两个长方形。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Canvas tutorial<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"> canvas &#123; border: 1px solid black; &#125; </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"tutorial"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123; <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>); <span class="keyword">if</span>(!canvas.getContext) <span class="keyword">return</span>; <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>); ctx.fillStyle = <span class="string">"rgb(200,0,0)"</span>; <span class="comment">//绘制矩形 ctx.fillRect (10, 10, 55, 50); ctx.fillStyle = "rgba(0, 0, 200, 0.5)"; ctx.fillRect (30, 30, 55, 50); &#125; draw(); </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="三、绘制形状"><a href="#三、绘制形状" class="headerlink" title="三、绘制形状"></a>三、绘制形状</h1><h2 id="3-1-栅格-grid-和坐标空间"><a href="#3-1-栅格-grid-和坐标空间" class="headerlink" title="3.1 栅格(grid)和坐标空间"></a>3.1 栅格<code>(grid)</code>和坐标空间</h2><p>​ 如下图所示，<code>canvas</code>元素默认被网格所覆盖。通常来说网格中的一个单元相当于<code>canvas</code>元素中的一像素。栅格的起点为左上角（坐标为（0,0））。所有元素的位置都相对于原点来定位。所以图中蓝色方形左上角的坐标为距离左边（X轴）x像素，距离上边（Y轴）y像素（坐标为（x,y））。</p>
<p>​ 后面我们会涉及到坐标原点的平移、网格的旋转以及缩放等。</p>
<p><img src="https://mdn.mozillademos.org/files/224/Canvas_default_grid.png" alt=""></p>
<h2 id="3-2-绘制矩形"><a href="#3-2-绘制矩形" class="headerlink" title="3.2 绘制矩形"></a>3.2 绘制矩形</h2><p>​ <code>&lt;canvas&gt;</code> 只支持一种原生的 图形绘制：矩形。所有其他图形都至少需要生成一种路径(<code>path</code>)。不过，我们拥有众多路径生成的方法让复杂图形的绘制成为了可能。</p>
<blockquote>
<p><code>canvas</code>t 提供了三种方法绘制矩形：</p>
</blockquote>
<ol>
<li><p><code>fillRect(x, y, width, height)</code></p>
<p>绘制一个填充的矩形</p>
</li>
<li><p><code>strockRect(x, y, width, height)</code></p>
<p>绘制一个矩形的边框</p>
</li>
<li><p><code>clearRect(x, y, widh, height)</code></p>
<p>清除指定的矩形区域，然后这块区域会变的完全透明。</p>
</li>
</ol>
<p>说明：</p>
<p>​ 这3个方法具有相同的参数。</p>
<p>​ <code>x, y</code>：指的是矩形的左上角的坐标。(相对于<code>canvas</code>的坐标原点)</p>
<p>​ <code>width, height</code>：指的是绘制的矩形的宽和高。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span>(!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.fillRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">50</span>);  <span class="comment">//绘制矩形,填充的默认颜色为黑色</span></div><div class="line">    ctx.strokeRect(<span class="number">10</span>, <span class="number">70</span>, <span class="number">100</span>, <span class="number">50</span>);  <span class="comment">//绘制矩形边框</span></div><div class="line"></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/57498980.jpg" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.clearRect(<span class="number">15</span>, <span class="number">15</span>, <span class="number">50</span>, <span class="number">25</span>);</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/92358331.jpg" alt=""></p>
<h1 id="四、绘制路径-path"><a href="#四、绘制路径-path" class="headerlink" title="四、绘制路径(path)"></a>四、绘制路径(<code>path</code>)</h1><p>​ 图形的基本元素是路径。</p>
<p>​ 路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。</p>
<p>​ 一个路径，甚至一个子路径，都是闭合的。</p>
<blockquote>
<p>使用路径绘制图形需要一些额外的步骤：</p>
</blockquote>
<ol>
<li>创建路径起始点</li>
<li>调用绘制方法去绘制出路径</li>
<li>把路径封闭</li>
<li>一旦路径生成，通过描边或填充路径区域来渲染图形。</li>
</ol>
<blockquote>
<p>下面是需要用到的方法：</p>
</blockquote>
<ol>
<li><p><code>beginPath()</code></p>
<p>新建一条路径，路径一旦创建成功，图形绘制命令被指向到路径上生成路径</p>
</li>
<li><p><code>moveTo(x, y)</code></p>
<p>把画笔移动到指定的坐标<code>(x, y)</code>。相当于设置路径的起始点坐标。</p>
</li>
<li><p><code>closePath()</code></p>
<p>闭合路径之后，图形绘制命令又重新指向到上下文中</p>
</li>
<li><p><code>stroke()</code></p>
<p>通过线条来绘制图形轮廓</p>
</li>
<li><p><code>fill()</code></p>
<p>通过填充路径的内容区域生成实心的图形</p>
</li>
</ol>
<h2 id="4-1-绘制线段"><a href="#4-1-绘制线段" class="headerlink" title="4.1 绘制线段"></a>4.1 绘制线段</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath(); <span class="comment">//新建一条path</span></div><div class="line">    ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>); <span class="comment">//把画笔移动到指定的坐标</span></div><div class="line">    ctx.lineTo(<span class="number">200</span>, <span class="number">50</span>);  <span class="comment">//绘制一条从当前位置到指定坐标(200, 50)的直线.</span></div><div class="line">    <span class="comment">//闭合路径。会拉一条从当前点到path起始点的直线。如果当前点与起始点重合，则什么都不做</span></div><div class="line">    ctx.closePath();</div><div class="line">    ctx.stroke(); <span class="comment">//绘制路径。</span></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<h2 id="4-2-绘制三角形边框"><a href="#4-2-绘制三角形边框" class="headerlink" title="4.2 绘制三角形边框"></a>4.2 绘制三角形边框</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>);</div><div class="line">    ctx.lineTo(<span class="number">200</span>, <span class="number">50</span>);</div><div class="line">    ctx.lineTo(<span class="number">200</span>, <span class="number">200</span>);</div><div class="line">    ctx.closePath(); <span class="comment">//虽然我们只绘制了两条线段，但是closePath会closePath，仍然是一个3角形</span></div><div class="line">    ctx.stroke(); <span class="comment">//描边。stroke不会自动closePath()</span></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/20099429.jpg" alt=""></p>
<h2 id="4-3-填充三角形"><a href="#4-3-填充三角形" class="headerlink" title="4.3 填充三角形"></a>4.3 填充三角形</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>);</div><div class="line">    ctx.lineTo(<span class="number">200</span>, <span class="number">50</span>);</div><div class="line">    ctx.lineTo(<span class="number">200</span>, <span class="number">200</span>);</div><div class="line"></div><div class="line">    ctx.fill(); <span class="comment">//填充闭合区域。如果path没有闭合，则fill()会自动闭合路径。</span></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/83072674.jpg" alt=""></p>
<h2 id="4-4-绘制圆弧"><a href="#4-4-绘制圆弧" class="headerlink" title="4.4 绘制圆弧"></a>4.4 绘制圆弧</h2><blockquote>
<p>有两个方法可以绘制圆弧：</p>
</blockquote>
<ol>
<li><p><code>arc(x, y, r, startAngle, endAngle, anticlockwise)</code>:</p>
<p>以<code>(x, y)</code>为圆心，以<code>r</code>为半径，从 <code>startAngle</code>弧度开始到<code>endAngle</code>弧度结束。<code>anticlosewise</code>是布尔值，<code>true</code>表示逆时针，<code>false</code>表示顺时针。(默认是顺时针)</p>
<p>注意：</p>
<ol>
<li>这里的度数都是弧度。</li>
<li><code>0</code>弧度是指的<code>x</code>轴正方形</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">radians=(<span class="built_in">Math</span>.PI/<span class="number">180</span>)*degrees   <span class="comment">//角度转换成弧度</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>arcTo(x1, y1, x2, y2, radius)</code>:</p>
<p>根据给定的控制点和半径画一段圆弧，最后再以直线连接两个控制点。</p>
</li>
</ol>
<h3 id="圆弧案例1："><a href="#圆弧案例1：" class="headerlink" title="圆弧案例1："></a>圆弧案例1：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">50</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="literal">false</span>);</div><div class="line">    ctx.stroke();</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/97210404.jpg" alt=""></p>
<h3 id="圆弧案例2："><a href="#圆弧案例2：" class="headerlink" title="圆弧案例2："></a>圆弧案例2：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">50</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="literal">false</span>);</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">150</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">0</span>, -<span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="literal">true</span>);</div><div class="line">    ctx.closePath();</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">50</span>, <span class="number">150</span>, <span class="number">40</span>, -<span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="literal">false</span>);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">150</span>, <span class="number">150</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI, <span class="literal">false</span>);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/62078705.jpg" alt=""></p>
<h3 id="圆弧案例3："><a href="#圆弧案例3：" class="headerlink" title="圆弧案例3："></a>圆弧案例3：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>);</div><div class="line">    <span class="comment">//参数1、2：控制点1坐标 参数3、4：控制点2坐标 参数4：圆弧半径</span></div><div class="line">    ctx.arcTo(<span class="number">200</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">100</span>);</div><div class="line">    ctx.lineTo(<span class="number">200</span>, <span class="number">200</span>)</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.rect(<span class="number">50</span>, <span class="number">50</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.rect(<span class="number">200</span>, <span class="number">50</span>, <span class="number">10</span>, <span class="number">10</span>)</div><div class="line">    ctx.rect(<span class="number">200</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">10</span>)</div><div class="line">    ctx.fill()</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/95442248.jpg" alt=""></p>
<p><code>arcTo</code>方法的说明：</p>
<p>​ 这个方法可以这样理解。绘制的弧形是由两条切线所决定。</p>
<p>​ 第 1 条切线：起始点和控制点1决定的直线。</p>
<p>​ 第 2 条切线：控制点1 和控制点2决定的直线。</p>
<p>​ <strong>其实绘制的圆弧就是与这两条直线相切的圆弧。</strong></p>
<h2 id="4-5-绘制贝塞尔曲线"><a href="#4-5-绘制贝塞尔曲线" class="headerlink" title="4.5 绘制贝塞尔曲线"></a>4.5 绘制贝塞尔曲线</h2><h3 id="4-5-1-什么是贝塞尔曲线"><a href="#4-5-1-什么是贝塞尔曲线" class="headerlink" title="4.5.1 什么是贝塞尔曲线"></a>4.5.1 什么是贝塞尔曲线</h3><p>​ 贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。</p>
<p>​ 一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋，我们在绘图工具上看到的钢笔工具就是来做这种矢量曲线的。</p>
<p>​ 贝塞尔曲线是计算机图形学中相当重要的参数曲线，在一些比较成熟的位图软件中也有贝塞尔曲线工具如PhotoShop等。在Flash4中还没有完整的曲线工具，而在Flash5里面已经提供出贝塞尔曲线工具。</p>
<p>​ 贝塞尔曲线于1962，由法国工程师皮埃尔·贝塞尔（Pierre Bézier）所广泛发表，他运用贝塞尔曲线来为汽车的主体进行设计。贝塞尔曲线最初由Paul de Casteljau于1959年运用de Casteljau演算法开发，以稳定数值的方法求出贝兹曲线。</p>
<h4 id="一次贝塞尔曲线-线性贝塞尔曲线"><a href="#一次贝塞尔曲线-线性贝塞尔曲线" class="headerlink" title="一次贝塞尔曲线(线性贝塞尔曲线)"></a>一次贝塞尔曲线(线性贝塞尔曲线)</h4><p>​ 一次贝塞尔曲线其实是一条直线。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/40655077.jpg" alt=""></p>
<h4 id="二次贝塞尔曲线"><a href="#二次贝塞尔曲线" class="headerlink" title="二次贝塞尔曲线"></a>二次贝塞尔曲线</h4><p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/94917354.jpg" alt=""></p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/35792129.jpg" alt=""></p>
<h4 id="三次贝塞尔曲线"><a href="#三次贝塞尔曲线" class="headerlink" title="三次贝塞尔曲线"></a>三次贝塞尔曲线</h4><p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/69159470.jpg" alt=""></p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/55999388.jpg" alt=""></p>
<h3 id="4-5-2-绘制贝塞尔曲线"><a href="#4-5-2-绘制贝塞尔曲线" class="headerlink" title="4.5.2 绘制贝塞尔曲线"></a>4.5.2 绘制贝塞尔曲线</h3><h4 id="绘制二次贝塞尔曲线"><a href="#绘制二次贝塞尔曲线" class="headerlink" title="绘制二次贝塞尔曲线"></a>绘制二次贝塞尔曲线</h4><p><code>quadraticCurveTo(cp1x, cp1y, x, y)</code>:</p>
<p><strong>说明：</strong></p>
<p>​ 参数1和2：控制点坐标</p>
<p>​ 参数3和4：结束点坐标</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">10</span>, <span class="number">200</span>); <span class="comment">//起始点</span></div><div class="line">    <span class="keyword">var</span> cp1x = <span class="number">40</span>, cp1y = <span class="number">100</span>;  <span class="comment">//控制点</span></div><div class="line">    <span class="keyword">var</span> x = <span class="number">200</span>, y = <span class="number">200</span>; <span class="comment">// 结束点</span></div><div class="line">    <span class="comment">//绘制二次贝塞尔曲线</span></div><div class="line">    ctx.quadraticCurveTo(cp1x, cp1y, x, y);</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.rect(<span class="number">10</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.rect(cp1x, cp1y, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.rect(x, y, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/31012258.jpg" alt=""></p>
<h4 id="绘制三次贝塞尔曲线"><a href="#绘制三次贝塞尔曲线" class="headerlink" title="绘制三次贝塞尔曲线"></a><strong>绘制三次贝塞尔曲线</strong></h4><p><code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code>：</p>
<p>说明：</p>
<p>​ 参数1和2：控制点1的坐标</p>
<p>​ 参数3和4：控制点2的坐标</p>
<p>​ 参数5和6：结束点的坐标</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">40</span>, <span class="number">200</span>); <span class="comment">//起始点</span></div><div class="line">    <span class="keyword">var</span> cp1x = <span class="number">20</span>, cp1y = <span class="number">100</span>;  <span class="comment">//控制点1</span></div><div class="line">    <span class="keyword">var</span> cp2x = <span class="number">100</span>, cp2y = <span class="number">120</span>;  <span class="comment">//控制点2</span></div><div class="line">    <span class="keyword">var</span> x = <span class="number">200</span>, y = <span class="number">200</span>; <span class="comment">// 结束点</span></div><div class="line">    <span class="comment">//绘制二次贝塞尔曲线</span></div><div class="line">    ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.rect(<span class="number">40</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.rect(cp1x, cp1y, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.rect(cp2x, cp2y, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.rect(x, y, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/18941618.jpg" alt=""></p>
<h1 id="五、添加样式和颜色"><a href="#五、添加样式和颜色" class="headerlink" title="五、添加样式和颜色"></a>五、添加样式和颜色</h1><p>​ 在前面的绘制矩形章节中，只用到了默认的线条和颜色。</p>
<p>​ 如果想要给图形上色，有两个重要的属性可以做到。</p>
<ol>
<li><p><code>fillStyle = color</code></p>
<p>设置图形的填充颜色</p>
</li>
<li><p><code>strokeStyle = color</code></p>
<p>设置图形轮廓的颜色</p>
</li>
</ol>
<blockquote>
<p>备注：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1\. `color` 可以是表示 `css` 颜色值的字符串、渐变对象或者图案对象。</div><div class="line">2\. 默认情况下，线条和填充颜色都是黑色。</div><div class="line">3\. 一旦您设置了 `strokeStyle` 或者 `fillStyle` 的值，那么这个新值就会成为新绘制的图形的默认值。如果你要给每个图形上不同的颜色，你需要重新设置 `fillStyle` 或 `strokeStyle` 的值。</div></pre></td></tr></table></figure>
<h2 id="fillStyle"><a href="#fillStyle" class="headerlink" title="fillStyle"></a><code>fillStyle</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">  <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">  <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++)&#123;</div><div class="line">      ctx.fillStyle = <span class="string">'rgb('</span> + <span class="built_in">Math</span>.floor(<span class="number">255</span> - <span class="number">42.5</span> * i) + <span class="string">','</span> +</div><div class="line">        <span class="built_in">Math</span>.floor(<span class="number">255</span> - <span class="number">42.5</span> * j) + <span class="string">',0)'</span>;</div><div class="line">      ctx.fillRect(j * <span class="number">50</span>, i * <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/90462466.jpg" alt=""></p>
<h2 id="strokeStyle"><a href="#strokeStyle" class="headerlink" title="strokeStyle"></a><code>strokeStyle</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">        <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">        <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++)&#123;</div><div class="line">                ctx.strokeStyle = <span class="string">`rgb(<span class="subst">$&#123;randomInt(<span class="number">0</span>, <span class="number">255</span>)&#125;</span>,<span class="subst">$&#123;randomInt(<span class="number">0</span>, <span class="number">255</span>)&#125;</span>,<span class="subst">$&#123;randomInt(<span class="number">0</span>, <span class="number">255</span>)&#125;</span>)`</span>;</div><div class="line">                ctx.strokeRect(j * <span class="number">50</span>, i * <span class="number">50</span>, <span class="number">40</span>, <span class="number">40</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    draw();</div><div class="line">    <span class="comment">/** 作者:李振超 4 Jun 2017 12:12 返回随机的 [from, to] 之间的整数(包括from，也包括to) */</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">randomInt</span>(<span class="params">from, to</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * (to - <span class="keyword">from</span> + <span class="number">1</span>) + <span class="keyword">from</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/39824191.jpg" alt=""></p>
<h2 id="Transparency-透明度"><a href="#Transparency-透明度" class="headerlink" title="Transparency(透明度)"></a><code>Transparency(透明度)</code></h2><p><code>globalAlpha = transparencyValue</code></p>
<p>​ 这个属性影响到 canvas 里所有图形的透明度，有效的值范围是 0.0 （完全透明）到 1.0（完全不透明），默认是 1.0。</p>
<p>​ <code>globalAlpha</code> 属性在需要绘制大量拥有相同透明度的图形时候相当高效。不过，我认为使用<code>rgba()</code>设置透明度更加好一些。</p>
<h2 id="line-style"><a href="#line-style" class="headerlink" title="line style"></a><code>line style</code></h2><h3 id="1-lineWidth-value"><a href="#1-lineWidth-value" class="headerlink" title="1. lineWidth = value"></a>1. <code>lineWidth = value</code></h3><p>线宽。只能是正值。默认是<code>1.0</code>。</p>
<p>起始点和终点的连线为中心，<strong>上下各占线宽的一半</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ctx.beginPath();</div><div class="line">ctx.moveTo(<span class="number">10</span>, <span class="number">10</span>);</div><div class="line">ctx.lineTo(<span class="number">100</span>, <span class="number">10</span>);</div><div class="line">ctx.lineWidth = <span class="number">10</span>;</div><div class="line">ctx.stroke();</div><div class="line"></div><div class="line">ctx.beginPath();</div><div class="line">ctx.moveTo(<span class="number">110</span>, <span class="number">10</span>);</div><div class="line">ctx.lineTo(<span class="number">160</span>, <span class="number">10</span>)</div><div class="line">ctx.lineWidth = <span class="number">20</span>;</div><div class="line">ctx.stroke()</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/29873575.jpg" alt=""></p>
<h3 id="2-lineCap-type"><a href="#2-lineCap-type" class="headerlink" title="2. lineCap = type"></a>2. <code>lineCap = type</code></h3><p>线条末端样式。</p>
<p>共有3个值：</p>
<ol>
<li><code>butt</code>：线段末端以方形结束</li>
<li><code>round</code>：线段末端以圆形结束</li>
<li><p><code>square</code>：线段末端以方形结束，但是增加了一个宽度和线段相同，高度是线段厚度一半的矩形区域。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> lineCaps = [<span class="string">"butt"</span>, <span class="string">"round"</span>, <span class="string">"square"</span>];</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</div><div class="line">   ctx.beginPath();</div><div class="line">   ctx.moveTo(<span class="number">20</span> + <span class="number">30</span> * i, <span class="number">30</span>);</div><div class="line">   ctx.lineTo(<span class="number">20</span> + <span class="number">30</span> * i, <span class="number">100</span>);</div><div class="line">   ctx.lineWidth = <span class="number">20</span>;</div><div class="line">   ctx.lineCap = lineCaps[i];</div><div class="line">   ctx.stroke();</div><div class="line">&#125;</div><div class="line"></div><div class="line">ctx.beginPath();</div><div class="line">ctx.moveTo(<span class="number">0</span>, <span class="number">30</span>);</div><div class="line">ctx.lineTo(<span class="number">300</span>, <span class="number">30</span>);</div><div class="line"></div><div class="line">ctx.moveTo(<span class="number">0</span>, <span class="number">100</span>);</div><div class="line">ctx.lineTo(<span class="number">300</span>, <span class="number">100</span>)</div><div class="line"></div><div class="line">ctx.strokeStyle = <span class="string">"red"</span>;</div><div class="line">ctx.lineWidth = <span class="number">1</span>;</div><div class="line">ctx.stroke();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-4/41486892.jpg" alt=""></p>
</li>
</ol>
<h3 id="3-lineJoin-type"><a href="#3-lineJoin-type" class="headerlink" title="3. lineJoin = type"></a>3. <code>lineJoin = type</code></h3><p>同一个path内，设定线条与线条间接合处的样式。</p>
<p>共有3个值<code>round</code>, <code>bevel</code> 和 <code>miter</code>：</p>
<ol>
<li><p><code>round</code></p>
<p>通过填充一个额外的，圆心在相连部分末端的扇形，绘制拐角的形状。 圆角的半径是线段的宽度。</p>
</li>
<li><p><code>bevel</code></p>
<p>在相连部分的末端填充一个额外的以三角形为底的区域， 每个部分都有各自独立的矩形拐角。</p>
</li>
<li><p><code>miter</code>(默认)</p>
<p>通过延伸相连部分的外边缘，使其相交于一点，形成一个额外的菱形区域。</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> lineJoin = [<span class="string">'round'</span>, <span class="string">'bevel'</span>, <span class="string">'miter'</span>];</div><div class="line">    ctx.lineWidth = <span class="number">20</span>;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lineJoin.length; i++)&#123;</div><div class="line">        ctx.lineJoin = lineJoin[i];</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.moveTo(<span class="number">50</span>, <span class="number">50</span> + i * <span class="number">50</span>);</div><div class="line">        ctx.lineTo(<span class="number">100</span>, <span class="number">100</span> + i * <span class="number">50</span>);</div><div class="line">        ctx.lineTo(<span class="number">150</span>, <span class="number">50</span> + i * <span class="number">50</span>);</div><div class="line">        ctx.lineTo(<span class="number">200</span>, <span class="number">100</span> + i * <span class="number">50</span>);</div><div class="line">        ctx.lineTo(<span class="number">250</span>, <span class="number">50</span> + i * <span class="number">50</span>);</div><div class="line">        ctx.stroke();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-5/5058353.jpg" alt=""></p>
<h3 id="4-虚线"><a href="#4-虚线" class="headerlink" title="4. 虚线"></a>4. 虚线</h3><p>用 <code>setLineDash</code> 方法和 <code>lineDashOffset</code> 属性来制定虚线样式. <code>setLineDash</code> 方法接受一个数组，来指定线段与间隙的交替；<code>lineDashOffset</code>属性设置起始偏移量.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    ctx.setLineDash([<span class="number">20</span>, <span class="number">5</span>]);  <span class="comment">// [实线长度, 间隙长度]</span></div><div class="line">    ctx.lineDashOffset = <span class="number">-0</span>;</div><div class="line">    ctx.strokeRect(<span class="number">50</span>, <span class="number">50</span>, <span class="number">210</span>, <span class="number">210</span>);</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-5/92471191.jpg" alt=""></p>
<p>备注：</p>
<p>​ <code>getLineDash()</code>:返回一个包含当前虚线样式，长度为非负偶数的数组。</p>
<h1 id="六、绘制文本"><a href="#六、绘制文本" class="headerlink" title="六、绘制文本"></a>六、绘制文本</h1><h2 id="绘制文本的两个方法"><a href="#绘制文本的两个方法" class="headerlink" title="绘制文本的两个方法"></a>绘制文本的两个方法</h2><p>canvas 提供了两种方法来渲染文本:</p>
<ol>
<li><p><code>fillText(text, x, y [, maxWidth])</code></p>
<p>在指定的(x,y)位置填充指定的文本，绘制的最大宽度是可选的.</p>
</li>
<li><p><code>strokeText(text, x, y [, maxWidth])</code></p>
<p>在指定的(x,y)位置绘制文本边框，绘制的最大宽度是可选的.</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.font = <span class="string">"100px sans-serif"</span></div><div class="line">    ctx.fillText(<span class="string">"天若有情"</span>, <span class="number">10</span>, <span class="number">100</span>);</div><div class="line">    ctx.strokeText(<span class="string">"天若有情"</span>, <span class="number">10</span>, <span class="number">200</span>)</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-6/87968030.jpg" alt=""></p>
<h2 id="给文本添加样式"><a href="#给文本添加样式" class="headerlink" title="给文本添加样式"></a>给文本添加样式</h2><ol>
<li><p><code>font = value</code></p>
<p>当前我们用来绘制文本的样式。这个字符串使用和 <code>CSS font</code>属性相同的语法. 默认的字体是 <code>10px sans-serif</code>。</p>
</li>
<li><p><code>textAlign = value</code></p>
<p>文本对齐选项. 可选的值包括：<code>start</code>, <code>end</code>, <code>left</code>, <code>right</code> or <code>center</code>. 默认值是 <code>start</code>。</p>
</li>
<li><p><code>textBaseline = value</code></p>
<p>基线对齐选项，可选的值包括：<code>top</code>, <code>hanging</code>, <code>middle</code>, <code>alphabetic</code>, <code>ideographic</code>, <code>bottom</code>。默认值是 <code>alphabetic。</code></p>
</li>
<li><p><code>direction = value</code></p>
<p>文本方向。可能的值包括：<code>ltr</code>, <code>rtl</code>, <code>inherit</code>。默认值是 <code>inherit。</code></p>
</li>
</ol>
<h1 id="七、绘制图片"><a href="#七、绘制图片" class="headerlink" title="七、绘制图片"></a>七、绘制图片</h1><p>​ 我们也可以在<code>canvas</code>上直接绘制图片。</p>
<h2 id="7-1-由零开始创建图片"><a href="#7-1-由零开始创建图片" class="headerlink" title="7.1 由零开始创建图片"></a>7.1 由零开始创建图片</h2><h3 id="创建-lt-img-gt-元素"><a href="#创建-lt-img-gt-元素" class="headerlink" title="创建&lt;img&gt;元素"></a>创建<code>&lt;img&gt;</code>元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();   <span class="comment">// 创建一个&lt;img&gt;元素</span></div><div class="line">img.src = <span class="string">'myImage.png'</span>; <span class="comment">// 设置图片源地址</span></div></pre></td></tr></table></figure>
<p>脚本执行后图片开始装载</p>
<h3 id="绘制img"><a href="#绘制img" class="headerlink" title="绘制img"></a>绘制<code>img</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//参数1：要绘制的img 参数2、3：绘制的img在canvas中的坐标</span></div><div class="line">ctx.drawImage(img,<span class="number">0</span>,<span class="number">0</span>);</div></pre></td></tr></table></figure>
<p>注意：</p>
<p>​ 考虑到图片是从网络加载，如果 <code>drawImage</code> 的时候图片还没有完全加载完成，则什么都不做，个别浏览器会抛异常。所以我们应该保证在 <code>img</code> 绘制完成之后再 <code>drawImage</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();   <span class="comment">// 创建img元素</span></div><div class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line">&#125;</div><div class="line">img.src = <span class="string">'myImage.png'</span>; <span class="comment">// 设置图片源地址</span></div></pre></td></tr></table></figure>
<h2 id="7-2-绘制-img-标签元素中的图片"><a href="#7-2-绘制-img-标签元素中的图片" class="headerlink" title="7.2 绘制 img 标签元素中的图片"></a>7.2 绘制 <code>img</code> 标签元素中的图片</h2><p>​ <code>img</code> 可以 <code>new</code> 也可以来源于我们页面的 <code>&lt;img&gt;</code>标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./美女.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"tutorial"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span> <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123; <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>); <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>; <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>); <span class="keyword">var</span> img = <span class="built_in">document</span>.querySelector(<span class="string">"img"</span>); ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>); &#125; <span class="built_in">document</span>.querySelector(<span class="string">"img"</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123; draw(); &#125; </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>第一张图片就是页面中的<code>&lt;img&gt;</code>标签</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-6/84133001.jpg" alt=""></p>
<h2 id="7-3-缩放图片"><a href="#7-3-缩放图片" class="headerlink" title="7.3 缩放图片"></a>7.3 缩放图片</h2><p><code>drawImage()</code> 也可以再添加两个参数：</p>
<p>​ <code>drawImage(image, x, y, width, height)</code></p>
<p>​ 这个方法多了2个参数：<code>width</code> 和 <code>height，</code>这两个参数用来控制 当像canvas画入时应该缩放的大小。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">200</span>)</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-9/14522939.jpg" alt=""></p>
<h2 id="7-4-切片-slice"><a href="#7-4-切片-slice" class="headerlink" title="7.4 切片(slice)"></a>7.4 切片(<code>slice</code>)</h2><p><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code></p>
<p>​ 第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。</p>
<p>其他8个参数：</p>
<p>​ 前4个是定义图像源的切片位置和大小，</p>
<p>​ 后4个则是定义切片的目标显示位置和大小。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-9/86448348.jpg" alt=""></p>
<h1 id="八、状态的保存和恢复"><a href="#八、状态的保存和恢复" class="headerlink" title="八、状态的保存和恢复"></a>八、状态的保存和恢复</h1><p><code>Saving and restoring state</code>是绘制复杂图形时必不可少的操作。</p>
<p><code>save()和restore()</code></p>
<p>​ <code>save</code> 和 <code>restore</code> 方法是用来保存和恢复 <code>canvas</code> 状态的，都没有参数。</p>
<p>​ <code>Canvas</code> 的状态就是当前画面应用的所有样式和变形的一个快照。</p>
<ol>
<li><p>关于 <code>save()</code></p>
<p>Canvas状态存储在栈中，每当<code>save()</code>方法被调用后，当前的状态就被推送到栈中保存。一个绘画状态包括：</p>
<ul>
<li><p>当前应用的变形（即移动，旋转和缩放）</p>
</li>
<li><p><code>strokeStyle</code>, <code>fillStyle</code>, <code>globalAlpha</code>, <code>lineWidth</code>, <code>lineCap</code>, <code>lineJoin</code>, <code>miterLimit</code>, <code>shadowOffsetX</code>, <code>shadowOffsetY</code>, <code>shadowBlur</code>, <code>shadowColor</code>, <code>globalCompositeOperation 的值</code></p>
</li>
<li><p>当前的裁切路径（<code>clipping path</code>）</p>
</li>
</ul>
<p>​</p>
<p><strong>可以调用任意多次 <code>save</code>方法。</strong>(类似数组的<code>push()</code>)</p>
</li>
<li><p>关于<code>restore()</code></p>
<p>每一次调用 <code>restore</code> 方法，上一个保存的状态就从栈中弹出，所有设定都恢复。(类似数组的<code>pop()</code>)</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">150</span>);   <span class="comment">// 使用默认设置绘制一个矩形</span></div><div class="line">    ctx.save();                  <span class="comment">// 保存默认状态</span></div><div class="line"></div><div class="line">    ctx.fillStyle = <span class="string">'red'</span>       <span class="comment">// 在原有配置基础上对颜色做改变</span></div><div class="line">    ctx.fillRect(<span class="number">15</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>); <span class="comment">// 使用新的设置绘制一个矩形</span></div><div class="line"></div><div class="line">    ctx.save();                  <span class="comment">// 保存当前状态</span></div><div class="line">    ctx.fillStyle = <span class="string">'#FFF'</span>       <span class="comment">// 再次改变颜色配置</span></div><div class="line">    ctx.fillRect(<span class="number">30</span>, <span class="number">30</span>, <span class="number">90</span>, <span class="number">90</span>);   <span class="comment">// 使用新的配置绘制一个矩形</span></div><div class="line"></div><div class="line">    ctx.restore();               <span class="comment">// 重新加载之前的颜色状态</span></div><div class="line">    ctx.fillRect(<span class="number">45</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">60</span>);   <span class="comment">// 使用上一次的配置绘制一个矩形</span></div><div class="line"></div><div class="line">    ctx.restore();               <span class="comment">// 加载默认颜色配置</span></div><div class="line">    ctx.fillRect(<span class="number">60</span>, <span class="number">60</span>, <span class="number">30</span>, <span class="number">30</span>);   <span class="comment">// 使用加载的配置绘制一个矩形</span></div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<h1 id="九、变形"><a href="#九、变形" class="headerlink" title="九、变形"></a>九、变形</h1><h2 id="9-1-translate"><a href="#9-1-translate" class="headerlink" title="9.1 translate"></a>9.1 translate</h2><p><code>translate(x, y)</code></p>
<p>​ 用来移动 <code>canvas</code> 的<strong>原点</strong>到指定的位置</p>
<p>​ <code>translate</code>方法接受两个参数。<code>x</code> 是左右偏移量，<code>y</code> 是上下偏移量，如右图所示。</p>
<p>在做变形之前先保存状态是一个良好的习惯。大多数情况下，调用 <code>restore</code> 方法比手动恢复原先的状态要简单得多。又如果你是在一个循环中做位移但没有保存和恢复<code>canvas</code> 的状态，很可能到最后会发现怎么有些东西不见了，那是因为它很可能已经超出 <code>canvas</code> 范围以外了。</p>
<p>​ 注意：<code>translate</code>移动的是<code>canvas</code>的坐标原点。(坐标变换)</p>
<p>​ <img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/83770925.jpg" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial1'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.save(); <span class="comment">//保存坐原点平移之前的状态</span></div><div class="line">    ctx.translate(<span class="number">100</span>, <span class="number">100</span>);</div><div class="line">    ctx.strokeRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</div><div class="line">    ctx.restore(); <span class="comment">//恢复到最初状态</span></div><div class="line">    ctx.translate(<span class="number">220</span>, <span class="number">220</span>);</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/36692804.jpg" alt=""></p>
<h2 id="9-2-rotate"><a href="#9-2-rotate" class="headerlink" title="9.2 rotate"></a>9.2 rotate</h2><p><code>rotate(angle)</code></p>
<p>​ 旋转坐标轴。</p>
<p>​ 这个方法只接受一个参数：旋转的角度(angle)，它是顺时针方向的，以弧度为单位的值。</p>
<p>​ 旋转的中心是坐标原点。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/37980271.jpg" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial1'</span>);</div><div class="line">  <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">  <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">  ctx.fillStyle = <span class="string">"red"</span>;</div><div class="line">  ctx.save();</div><div class="line"></div><div class="line">  ctx.translate(<span class="number">100</span>, <span class="number">100</span>);</div><div class="line">  ctx.rotate(<span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">45</span>);</div><div class="line">  ctx.fillStyle = <span class="string">"blue"</span>;</div><div class="line">  ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">  ctx.restore();</div><div class="line"></div><div class="line">  ctx.save();</div><div class="line">  ctx.translate(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">  ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>)</div><div class="line">  ctx.restore();</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/40328613.jpg" alt=""></p>
<h2 id="9-3-scale"><a href="#9-3-scale" class="headerlink" title="9.3 scale"></a>9.3 scale</h2><p><code>scale(x, y)</code></p>
<p>​ 我们用它来增减图形在 <code>canvas</code> 中的像素数目，对形状，位图进行缩小或者放大。</p>
<p>​ <code>scale</code>方法接受两个参数。<code>x,y</code>分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩 小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。</p>
<p>​ 默认情况下，<code>canvas</code> 的 1 单位就是 1 个像素。举例说，如果我们设置缩放因子是 0.5，1 个单位就变成对应 0.5 个像素，这样绘制出来的形状就会是原先的一半。同理，设置为 2.0 时，1 个单位就对应变成了 2 像素，绘制的结果就是图形放大了 2 倍。</p>
<h2 id="9-4-transform-变形矩阵"><a href="#9-4-transform-变形矩阵" class="headerlink" title="9.4 transform(变形矩阵)"></a>9.4 transform(变形矩阵)</h2><p><code>transform(a, b, c, d, e, f)</code></p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/89391901.jpg" alt=""></p>
<p><code>a (m11)</code></p>
<p>​ Horizontal scaling.</p>
<p><code>b (m12)</code></p>
<p>​ Horizontal skewing.</p>
<p><code>c (m21)</code></p>
<p>​ Vertical skewing.</p>
<p><code>d (m22)</code></p>
<p>​ Vertical scaling.</p>
<p><code>e (dx)</code></p>
<p>​ Horizontal moving.</p>
<p><code>f (dy)</code></p>
<p>​ Vertical moving.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial1'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.transform(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/15535750.jpg" alt=""></p>
<h1 id="十、合成"><a href="#十、合成" class="headerlink" title="十、合成"></a>十、合成</h1><p>​ 在前面的所有例子中、，我们总是将一个图形画在另一个之上，对于其他更多的情况，仅仅这样是远远不够的。比如，对合成的图形来说，绘制顺序会有限制。不过，我们可以利用 <code>globalCompositeOperation</code> 属性来改变这种状况。</p>
<p><code>globalCompositeOperation = type</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">var</span> ctx;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial1'</span>);</div><div class="line">        <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">        <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">        ctx.fillStyle = <span class="string">"blue"</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>);</div><div class="line"></div><div class="line">        ctx.globalCompositeOperation = <span class="string">"source-over"</span>; <span class="comment">//全局合成操作</span></div><div class="line">        ctx.fillStyle = <span class="string">"red"</span>;</div><div class="line">        ctx.fillRect(<span class="number">100</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">200</span>);</div><div class="line">    &#125;</div><div class="line">    draw();</div><div class="line"></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>注：下面的展示中，蓝色是原有的，红色是新的。</p>
<p>type `是下面 13 种字符串值之一：</p>
<h2 id="1-source-over-default"><a href="#1-source-over-default" class="headerlink" title="1. source-over(default)"></a>1. source-over(default)</h2><p>这是默认设置，新图像会覆盖在原有图像。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/15850624.jpg" alt=""></p>
<h2 id="2-source-in"><a href="#2-source-in" class="headerlink" title="2. source-in"></a>2. source-in</h2><p>仅仅会出现新图像与原来图像重叠的部分，其他区域都变成透明的。(包括其他的老图像区域也会透明)</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/37411043.jpg" alt=""></p>
<h2 id="3-source-out"><a href="#3-source-out" class="headerlink" title="3. source-out"></a>3. <code>source-out</code></h2><p>仅仅显示新图像与老图像没有重叠的部分，其余部分全部透明。(老图像也不显示)</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/41781103.jpg" alt=""></p>
<h2 id="4-source-atop"><a href="#4-source-atop" class="headerlink" title="4. source-atop"></a>4. source-atop</h2><p>新图像仅仅显示与老图像重叠区域。老图像仍然可以显示。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/29772191.jpg" alt=""></p>
<h2 id="5-destination-over"><a href="#5-destination-over" class="headerlink" title="5. destination-over"></a>5. destination-over</h2><p>新图像会在老图像的下面。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/23645788.jpg" alt=""></p>
<h2 id="6-destination-in"><a href="#6-destination-in" class="headerlink" title="6. destination-in"></a>6. destination-in</h2><p>仅仅新老图像重叠部分的老图像被显示，其他区域全部透明。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/78166139.jpg" alt=""></p>
<h2 id="7-destination-out"><a href="#7-destination-out" class="headerlink" title="7. destination-out"></a>7. destination-out</h2><p>仅仅老图像与新图像没有重叠的部分。 注意显示的是老图像的部分区域。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/27996302.jpg" alt=""></p>
<h2 id="8-destination-atop"><a href="#8-destination-atop" class="headerlink" title="8. destination-atop"></a>8. destination-atop</h2><p>老图像仅仅仅仅显示重叠部分，新图像会显示在老图像的下面。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/73933570.jpg" alt=""></p>
<h2 id="9-lighter"><a href="#9-lighter" class="headerlink" title="9. lighter"></a>9. lighter</h2><p>新老图像都显示，但是重叠区域的颜色做加处理</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/65148759.jpg" alt=""></p>
<h2 id="10-darken"><a href="#10-darken" class="headerlink" title="10. darken"></a>10. darken</h2><p>保留重叠部分最黑的像素。(每个颜色位进行比较，得到最小的)</p>
<p><code>blue: #0000ff</code></p>
<p><code>red: #ff0000</code></p>
<p>所以重叠部分的颜色：<code>#000000</code></p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/88895274.jpg" alt=""></p>
<h2 id="11-lighten"><a href="#11-lighten" class="headerlink" title="11. lighten"></a>11. lighten</h2><p>保证重叠部分最量的像素。(每个颜色位进行比较，得到最大的)</p>
<p><code>blue: #0000ff</code></p>
<p><code>red: #ff0000</code></p>
<p>所以重叠部分的颜色：<code>#ff00ff</code></p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/21148678.jpg" alt=""></p>
<h2 id="12-xor"><a href="#12-xor" class="headerlink" title="12. xor"></a>12. xor</h2><p>重叠部分会变成透明</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/44617053.jpg" alt=""></p>
<h2 id="13-copy"><a href="#13-copy" class="headerlink" title="13. copy"></a>13. copy</h2><p>只有新图像会被保留，其余的全部被清除(边透明)<br><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/11205920.jpg" alt=""></p>
<h1 id="十一、裁剪路径"><a href="#十一、裁剪路径" class="headerlink" title="十一、裁剪路径"></a>十一、裁剪路径</h1><p><code>clip()</code></p>
<p>​ 把已经创建的路径转换成裁剪路径。</p>
<p>​ 裁剪路径的作用是遮罩。只显示裁剪路径内的区域，裁剪路径外的区域会被隐藏。</p>
<p>​ 注意：<code>clip()</code>只能遮罩在这个方法调用之后绘制的图像，如果是<code>clip()</code>方法调用之前绘制的图像，则无法实现遮罩。</p>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/53022912.jpg" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial1'</span>);</div><div class="line">    <span class="keyword">if</span> (!canvas.getContext) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">20</span>,<span class="number">20</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">    ctx.clip();</div><div class="line"></div><div class="line">    ctx.fillStyle = <span class="string">"pink"</span>;</div><div class="line">    ctx.fillRect(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>,<span class="number">100</span>);</div><div class="line">&#125;</div><div class="line">draw();</div></pre></td></tr></table></figure>
<h1 id="十二、动画"><a href="#十二、动画" class="headerlink" title="十二、动画"></a>十二、动画</h1><h2 id="动画的基本步骤"><a href="#动画的基本步骤" class="headerlink" title="动画的基本步骤"></a>动画的基本步骤</h2><ol>
<li><p><strong>清空<code>canvas</code></strong></p>
<p>再绘制每一帧动画之前，需要清空所有。清空所有最简单的做法就是<code>clearRect()</code>方法</p>
</li>
<li><p><strong>保存<code>canvas</code>状态</strong></p>
<p>如果在绘制的过程中会更改<code>canvas</code>的状态(颜色、移动了坐标原点等),又在绘制每一帧时都是原始状态的话，则最好保存下<code>canvas</code>的状态</p>
</li>
<li><p><strong>绘制动画图形</strong></p>
<p>这一步才是真正的绘制动画帧</p>
</li>
<li><p><strong>恢复<code>canvas</code>状态</strong></p>
<p>如果你前面保存了<code>canvas</code>状态，则应该在绘制完成一帧之后恢复<code>canvas</code>状态。</p>
</li>
</ol>
<h2 id="控制动画"><a href="#控制动画" class="headerlink" title="控制动画"></a>控制动画</h2><p>我们可用通过<code>canvas</code>的方法或者自定义的方法把图像会知道到<code>canvas</code>上。正常情况，我们能看到绘制的结果是在脚本执行结束之后。例如，我们不可能在一个 <code>for</code> 循环内部完成动画。</p>
<p>也就是，为了执行动画，我们需要一些可以定时执行重绘的方法。</p>
<p>一般用到下面三个方法：</p>
<ol>
<li><code>setInterval()</code></li>
<li><code>setTimeout()</code></li>
<li><code>requestAnimationFrame()</code></li>
</ol>
<h2 id="案例1：太阳系"><a href="#案例1：太阳系" class="headerlink" title="案例1：太阳系"></a>案例1：太阳系</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> sun;</div><div class="line"><span class="keyword">let</span> earth;</div><div class="line"><span class="keyword">let</span> moon;</div><div class="line"><span class="keyword">let</span> ctx;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    sun = <span class="keyword">new</span> Image();</div><div class="line">    earth = <span class="keyword">new</span> Image();</div><div class="line">    moon = <span class="keyword">new</span> Image();</div><div class="line">    sun.src = <span class="string">"sun.png"</span>;</div><div class="line">    earth.src = <span class="string">"earth.png"</span>;</div><div class="line">    moon.src = <span class="string">"moon.png"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">"#solar"</span>);</div><div class="line">    ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    sun.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        draw()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">init();</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>); <span class="comment">//清空所有的内容</span></div><div class="line">    <span class="comment">/*绘制 太阳*/</span></div><div class="line">    ctx.drawImage(sun, <span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>);</div><div class="line"></div><div class="line">    ctx.save();</div><div class="line">    ctx.translate(<span class="number">150</span>, <span class="number">150</span>);</div><div class="line"></div><div class="line">    <span class="comment">//绘制earth轨道</span></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.strokeStyle = <span class="string">"rgba(255,255,0,0.5)"</span>;</div><div class="line">    ctx.arc(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI)</div><div class="line">    ctx.stroke()</div><div class="line"></div><div class="line">    <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">//绘制地球</span></div><div class="line">    ctx.rotate(<span class="number">2</span> * <span class="built_in">Math</span>.PI / <span class="number">60</span> * time.getSeconds() + <span class="number">2</span> * <span class="built_in">Math</span>.PI / <span class="number">60000</span> * time.getMilliseconds())</div><div class="line">    ctx.translate(<span class="number">100</span>, <span class="number">0</span>);</div><div class="line">    ctx.drawImage(earth, <span class="number">-12</span>, <span class="number">-12</span>)</div><div class="line"></div><div class="line">    <span class="comment">//绘制月球轨道</span></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.strokeStyle = <span class="string">"rgba(255,255,255,.3)"</span>;</div><div class="line">    ctx.arc(<span class="number">0</span>, <span class="number">0</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI);</div><div class="line">    ctx.stroke();</div><div class="line"></div><div class="line">    <span class="comment">//绘制月球</span></div><div class="line">    ctx.rotate(<span class="number">2</span> * <span class="built_in">Math</span>.PI / <span class="number">6</span> * time.getSeconds() + <span class="number">2</span> * <span class="built_in">Math</span>.PI / <span class="number">6000</span> * time.getMilliseconds());</div><div class="line">    ctx.translate(<span class="number">40</span>, <span class="number">0</span>);</div><div class="line">    ctx.drawImage(moon, <span class="number">-3.5</span>, <span class="number">-3.5</span>);</div><div class="line">    ctx.restore();</div><div class="line"></div><div class="line">    requestAnimationFrame(draw);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/65211642.jpg" alt=""></p>
</blockquote>
<h2 id="案例2：模拟时钟"><a href="#案例2：模拟时钟" class="headerlink" title="案例2：模拟时钟"></a>案例2：模拟时钟</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"> body &#123; padding: 0; margin: 0; background-color: rgba(0, 0, 0, 0.1) &#125; canvas &#123; display: block; margin: 200px auto; &#125; </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"solar"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"> </span></div><div class="line">	init(); </div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123; </div><div class="line">		<span class="keyword">let</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">"#solar"</span>)</div><div class="line">		; <span class="keyword">let</span> ctx = canvas.getContext(<span class="string">"2d"</span>); </div><div class="line">		draw(ctx); </div><div class="line">	&#125; </div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">ctx</span>)</span>&#123; </div><div class="line">		requestAnimationFrame(<span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>)</span>&#123; drawDial(ctx); <span class="comment">//绘制表盘 </span></div><div class="line">		drawAllHands(ctx); <span class="comment">//绘制时分秒针 </span></div><div class="line">		requestAnimationFrame(step); </div><div class="line">		&#125;); </div><div class="line">	&#125; </div><div class="line">	</div><div class="line">	<span class="comment">/*绘制时分秒针*/</span> </div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">drawAllHands</span>(<span class="params">ctx</span>)</span>&#123;</div><div class="line">		 <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="keyword">let</span> s = time.getSeconds(); </div><div class="line">		 <span class="keyword">let</span> m = time.getMinutes(); </div><div class="line">		 <span class="keyword">let</span> h = time.getHours(); </div><div class="line">		 <span class="keyword">let</span> pi = <span class="built_in">Math</span>.PI; </div><div class="line">		 <span class="keyword">let</span> secondAngle = pi / <span class="number">180</span> * <span class="number">6</span> * s; <span class="comment">//计算出来s针的弧度 </span></div><div class="line">		 <span class="keyword">let</span> minuteAngle = pi / <span class="number">180</span> * <span class="number">6</span> * m + secondAngle / <span class="number">60</span>; <span class="comment">//计算出来分针的弧度 </span></div><div class="line">		 <span class="keyword">let</span> hourAngle = pi / <span class="number">180</span> * <span class="number">30</span> * h + minuteAngle / <span class="number">12</span>; <span class="comment">//计算出来时针的弧度 </span></div><div class="line">		 drawHand(hourAngle, <span class="number">60</span>, <span class="number">6</span>, <span class="string">"red"</span>, ctx); <span class="comment">//绘制时针       </span></div><div class="line">		 drawHand(minuteAngle, <span class="number">106</span>, <span class="number">4</span>, <span class="string">"green"</span>, ctx); <span class="comment">//绘制分针 </span></div><div class="line">		 drawHand(secondAngle, <span class="number">129</span>, <span class="number">2</span>, <span class="string">"blue"</span>, ctx); <span class="comment">//绘制秒针 </span></div><div class="line">	 &#125; </div><div class="line">	 <span class="comment">/*绘制时针、或分针、或秒针 * </span></div><div class="line">	 参数1：要绘制的针的角度 * </div><div class="line">	 参数2：要绘制的针的长度 * </div><div class="line">	 参数3：要绘制的针的宽度 * </div><div class="line">	 参数4：要绘制的针的颜色 * </div><div class="line">	 参数4：ctx * */ </div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">drawHand</span>(<span class="params">angle, len, width, color, ctx</span>)</span>&#123; </div><div class="line">		ctx.save(); ctx.translate(<span class="number">150</span>, <span class="number">150</span>); <span class="comment">//把坐标轴的远点平移到原来的中心 </span></div><div class="line">		ctx.rotate(-<span class="built_in">Math</span>.PI / <span class="number">2</span> + angle); <span class="comment">//旋转坐标轴。 x轴就是针的角度 </span></div><div class="line">		ctx.beginPath(); </div><div class="line">		ctx.moveTo(<span class="number">-4</span>, <span class="number">0</span>); </div><div class="line">		ctx.lineTo(len, <span class="number">0</span>); <span class="comment">// 沿着x轴绘制针 </span></div><div class="line">		ctx.lineWidth = width; </div><div class="line">		ctx.strokeStyle = color; </div><div class="line">		ctx.lineCap = <span class="string">"round"</span>; </div><div class="line">		ctx.stroke(); </div><div class="line">		ctx.closePath(); </div><div class="line">		ctx.restore(); </div><div class="line">	&#125; <span class="comment">/*绘制表盘*/</span> </div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">drawDial</span>(<span class="params">ctx</span>)</span>&#123; </div><div class="line">		<span class="keyword">let</span> pi = <span class="built_in">Math</span>.PI; </div><div class="line">		ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>); <span class="comment">//清除所有内容 </span></div><div class="line">		ctx.save(); </div><div class="line">		ctx.translate(<span class="number">150</span>, <span class="number">150</span>); <span class="comment">//一定坐标原点到原来的中心 </span></div><div class="line">		ctx.beginPath(); </div><div class="line">		ctx.arc(<span class="number">0</span>, <span class="number">0</span>, <span class="number">148</span>, <span class="number">0</span>, <span class="number">2</span> * pi); <span class="comment">//绘制圆周 </span></div><div class="line">		ctx.stroke(); </div><div class="line">		ctx.closePath(); </div><div class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">60</span>; i++)&#123;<span class="comment">//绘制刻度。 ctx.save(); </span></div><div class="line">		ctx.rotate(-pi / <span class="number">2</span> + i * pi / <span class="number">30</span>); <span class="comment">//旋转坐标轴。坐标轴x的正方形从 向上开始算起 </span></div><div class="line">		ctx.beginPath(); </div><div class="line">		ctx.moveTo(<span class="number">110</span>, <span class="number">0</span>);</div><div class="line">		ctx.lineTo(<span class="number">140</span>, <span class="number">0</span>);</div><div class="line">		ctx.lineWidth = i % <span class="number">5</span> ? <span class="number">2</span> : <span class="number">4</span>; </div><div class="line">		ctx.strokeStyle = i % <span class="number">5</span> ? <span class="string">"blue"</span> : <span class="string">"red"</span>; </div><div class="line">		ctx.stroke(); </div><div class="line">		ctx.closePath(); </div><div class="line">		ctx.restore(); </div><div class="line">	&#125; </div><div class="line">	ctx.restore(); </div><div class="line">&#125; </div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><img src="http://o7cqr8cfk.bkt.clouddn.com/17-6-10/61345876.jpg" alt=""></p>
</blockquote>

      
    </div>

    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">
  <p><span>本文标题:</span><a href="/2017/07/02/canvas画布/">canvas画布</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 王泽奇 的个人博客">王泽奇</a></p>
  <p><span>发布时间:</span>2017年07月02日 - 00:07</p>
  <p><span>最后更新:</span>2017年07月02日 - 16:07</p>
  <p><span>原始链接:</span><a href="/2017/07/02/canvas画布/" title="canvas画布">http://wangzeqi.website/2017/07/02/canvas画布/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://wangzeqi.website/2017/07/02/canvas画布/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        swal({   
          title: "",   
          text: '复制成功',   
          html: false,
          timer: 500,   
          showConfirmButton: false
        });
      });
    }));  
</script>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>感谢给位朋友们支持！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/pay/wechat-qcode.jpg" alt="王泽奇 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/pay/ali.jpg" alt="王泽奇 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/canvas/" rel="tag"><i class="fa fa-tag"></i> canvas</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/02/常用正则表达式大全/" rel="next" title="常用正则表达式大全">
                <i class="fa fa-chevron-left"></i> 常用正则表达式大全
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/07/02/POI导出Excel工具/" rel="prev" title="POI导出Excel工具">
                POI导出Excel工具 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="SOHUCS" ></div>
    
  </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/upload/head.png"
               alt="王泽奇" />
          <p class="site-author-name" itemprop="name">王泽奇</p>
           
              <p class="site-description motion-element" itemprop="description">一个程序员的个人博客，不定期更新一些文章，以及分享生活中的快乐。</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wongzeqi" rel="external nofollow" target="_blank" title="GitHub">
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/nonono" rel="external nofollow" target="_blank" title="Twitter">
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/18795207136" rel="external nofollow" target="_blank" title="Weibo">
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.github.com" title="GitHub" target="_blank">GitHub</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jianshu.com/" title="简书" target="_blank">简书</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.qiniu.com/" title="七牛" target="_blank">七牛</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://aileen.top" title="张琳学姐" target="_blank">张琳学姐</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.zybuluo.com/mdeditor" title="作业部落" target="_blank">作业部落</a>
                </li>
              
            </ul>
          </div>
        

        

      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#canvas画布"><span class="nav-number">1.</span> <span class="nav-text">canvas画布</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、canvas简介"><span class="nav-number">2.</span> <span class="nav-text">一、canvas简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、Canvas基本使用"><span class="nav-number">3.</span> <span class="nav-text">二、Canvas基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-lt-canvas-gt-元素"><span class="nav-number">3.1.</span> <span class="nav-text">2.1 <canvas>元素</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#替换内容"><span class="nav-number">3.1.1.</span> <span class="nav-text">替换内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结束标签-lt-canvas-gt-不可省"><span class="nav-number">3.1.2.</span> <span class="nav-text">结束标签</canvas>不可省</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-渲染上下文-Thre-Rending-Context"><span class="nav-number">3.2.</span> <span class="nav-text">2.2 渲染上下文(Thre Rending Context)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-检测支持性"><span class="nav-number">3.3.</span> <span class="nav-text">2.3 检测支持性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-代码模板"><span class="nav-number">3.4.</span> <span class="nav-text">2.4 代码模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-一个简单的例子"><span class="nav-number">3.5.</span> <span class="nav-text">2.5 一个简单的例子</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、绘制形状"><span class="nav-number">4.</span> <span class="nav-text">三、绘制形状</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-栅格-grid-和坐标空间"><span class="nav-number">4.1.</span> <span class="nav-text">3.1 栅格(grid)和坐标空间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-绘制矩形"><span class="nav-number">4.2.</span> <span class="nav-text">3.2 绘制矩形</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、绘制路径-path"><span class="nav-number">5.</span> <span class="nav-text">四、绘制路径(path)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-绘制线段"><span class="nav-number">5.1.</span> <span class="nav-text">4.1 绘制线段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-绘制三角形边框"><span class="nav-number">5.2.</span> <span class="nav-text">4.2 绘制三角形边框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-填充三角形"><span class="nav-number">5.3.</span> <span class="nav-text">4.3 填充三角形</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-绘制圆弧"><span class="nav-number">5.4.</span> <span class="nav-text">4.4 绘制圆弧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#圆弧案例1："><span class="nav-number">5.4.1.</span> <span class="nav-text">圆弧案例1：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#圆弧案例2："><span class="nav-number">5.4.2.</span> <span class="nav-text">圆弧案例2：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#圆弧案例3："><span class="nav-number">5.4.3.</span> <span class="nav-text">圆弧案例3：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-绘制贝塞尔曲线"><span class="nav-number">5.5.</span> <span class="nav-text">4.5 绘制贝塞尔曲线</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-1-什么是贝塞尔曲线"><span class="nav-number">5.5.1.</span> <span class="nav-text">4.5.1 什么是贝塞尔曲线</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一次贝塞尔曲线-线性贝塞尔曲线"><span class="nav-number">5.5.1.1.</span> <span class="nav-text">一次贝塞尔曲线(线性贝塞尔曲线)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二次贝塞尔曲线"><span class="nav-number">5.5.1.2.</span> <span class="nav-text">二次贝塞尔曲线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三次贝塞尔曲线"><span class="nav-number">5.5.1.3.</span> <span class="nav-text">三次贝塞尔曲线</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-2-绘制贝塞尔曲线"><span class="nav-number">5.5.2.</span> <span class="nav-text">4.5.2 绘制贝塞尔曲线</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#绘制二次贝塞尔曲线"><span class="nav-number">5.5.2.1.</span> <span class="nav-text">绘制二次贝塞尔曲线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#绘制三次贝塞尔曲线"><span class="nav-number">5.5.2.2.</span> <span class="nav-text">绘制三次贝塞尔曲线</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、添加样式和颜色"><span class="nav-number">6.</span> <span class="nav-text">五、添加样式和颜色</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#fillStyle"><span class="nav-number">6.1.</span> <span class="nav-text">fillStyle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#strokeStyle"><span class="nav-number">6.2.</span> <span class="nav-text">strokeStyle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transparency-透明度"><span class="nav-number">6.3.</span> <span class="nav-text">Transparency(透明度)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#line-style"><span class="nav-number">6.4.</span> <span class="nav-text">line style</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-lineWidth-value"><span class="nav-number">6.4.1.</span> <span class="nav-text">1. lineWidth = value</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-lineCap-type"><span class="nav-number">6.4.2.</span> <span class="nav-text">2. lineCap = type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-lineJoin-type"><span class="nav-number">6.4.3.</span> <span class="nav-text">3. lineJoin = type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-虚线"><span class="nav-number">6.4.4.</span> <span class="nav-text">4. 虚线</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、绘制文本"><span class="nav-number">7.</span> <span class="nav-text">六、绘制文本</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制文本的两个方法"><span class="nav-number">7.1.</span> <span class="nav-text">绘制文本的两个方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#给文本添加样式"><span class="nav-number">7.2.</span> <span class="nav-text">给文本添加样式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、绘制图片"><span class="nav-number">8.</span> <span class="nav-text">七、绘制图片</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-由零开始创建图片"><span class="nav-number">8.1.</span> <span class="nav-text">7.1 由零开始创建图片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-lt-img-gt-元素"><span class="nav-number">8.1.1.</span> <span class="nav-text">创建<img>元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绘制img"><span class="nav-number">8.1.2.</span> <span class="nav-text">绘制img</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-绘制-img-标签元素中的图片"><span class="nav-number">8.2.</span> <span class="nav-text">7.2 绘制 img 标签元素中的图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-缩放图片"><span class="nav-number">8.3.</span> <span class="nav-text">7.3 缩放图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-切片-slice"><span class="nav-number">8.4.</span> <span class="nav-text">7.4 切片(slice)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#八、状态的保存和恢复"><span class="nav-number">9.</span> <span class="nav-text">八、状态的保存和恢复</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#九、变形"><span class="nav-number">10.</span> <span class="nav-text">九、变形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-translate"><span class="nav-number">10.1.</span> <span class="nav-text">9.1 translate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-rotate"><span class="nav-number">10.2.</span> <span class="nav-text">9.2 rotate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-scale"><span class="nav-number">10.3.</span> <span class="nav-text">9.3 scale</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-4-transform-变形矩阵"><span class="nav-number">10.4.</span> <span class="nav-text">9.4 transform(变形矩阵)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#十、合成"><span class="nav-number">11.</span> <span class="nav-text">十、合成</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-source-over-default"><span class="nav-number">11.1.</span> <span class="nav-text">1. source-over(default)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-source-in"><span class="nav-number">11.2.</span> <span class="nav-text">2. source-in</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-source-out"><span class="nav-number">11.3.</span> <span class="nav-text">3. source-out</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-source-atop"><span class="nav-number">11.4.</span> <span class="nav-text">4. source-atop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-destination-over"><span class="nav-number">11.5.</span> <span class="nav-text">5. destination-over</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-destination-in"><span class="nav-number">11.6.</span> <span class="nav-text">6. destination-in</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-destination-out"><span class="nav-number">11.7.</span> <span class="nav-text">7. destination-out</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-destination-atop"><span class="nav-number">11.8.</span> <span class="nav-text">8. destination-atop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-lighter"><span class="nav-number">11.9.</span> <span class="nav-text">9. lighter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-darken"><span class="nav-number">11.10.</span> <span class="nav-text">10. darken</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-lighten"><span class="nav-number">11.11.</span> <span class="nav-text">11. lighten</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-xor"><span class="nav-number">11.12.</span> <span class="nav-text">12. xor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-copy"><span class="nav-number">11.13.</span> <span class="nav-text">13. copy</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#十一、裁剪路径"><span class="nav-number">12.</span> <span class="nav-text">十一、裁剪路径</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#十二、动画"><span class="nav-number">13.</span> <span class="nav-text">十二、动画</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#动画的基本步骤"><span class="nav-number">13.1.</span> <span class="nav-text">动画的基本步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#控制动画"><span class="nav-number">13.2.</span> <span class="nav-text">控制动画</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例1：太阳系"><span class="nav-number">13.3.</span> <span class="nav-text">案例1：太阳系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例2：模拟时钟"><span class="nav-number">13.4.</span> <span class="nav-text">案例2：模拟时钟</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王泽奇</span>
</div>


<!--
<div class="powered-by">
  由 <a rel="external nofollow" class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" rel="external nofollow" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>
-->
<div class="powered-by">
|&nbsp;&nbsp;
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>


  
     <script type="text/javascript"> 
    (function(){ 
    var appid = 'cyt5gr922'; 
    var conf = '0b7e09b5029f21ee0f054d0ab01246b4'; 
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
    window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
    <script type="text/javascript" src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script>
  


  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  




  
     <script type="text/javascript"> 
    (function(){ 
    var appid = 'cyt5gr922'; 
    var conf = '0b7e09b5029f21ee0f054d0ab01246b4'; 
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
    window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
    <script type="text/javascript" src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script>
  


  





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

  

  


  <!--
  
  -->
  
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script>
</body>

</html>
